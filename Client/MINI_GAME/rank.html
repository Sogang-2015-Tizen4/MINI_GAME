<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport"
	content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<meta name="description"
	content="Tizen basic template generated by Tizen Web IDE" />

<title>RANK</title>

<link rel="stylesheet" type="text/css" href="css/style.css" />
<script src="js/main.js"></script>
<script src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
<script type="text/javascript">
	var name = "default";
	var id = "default";
	var score1 = 0;
	var score2 = 0;
	var userArr;
	
	function getCookie(cName) {
		cName = cName + '=';
		var cookieData = document.cookie;
		var start = cookieData.indexOf(cName);
		var cValue = '';
		if (start != -1) {
			start += cName.length;
			var end = cookieData.indexOf(';', start);
			if (end == -1)
				end = cookieData.length;
			cValue = cookieData.substring(start, end);
		}
		return unescape(cValue);
	};

	function getInform() {
		var msg = getCookie('ID');
		var string = msg;
		var strArr = string.split('#');

		name = strArr[0];
		id = strArr[1];
		score1 = strArr[2];
		score2 = strArr[3];
	};

	
	function getRank() {
		var string=getCookie('Rank');
		//alert(string);
		var tempArr = string.split('#');
		var userLen = tempArr.length - 1;

		userArr = new Array(new Array(userLen), new Array(4));

		for (var i = 0; i < userLen; i++) {
			userArr[i] = tempArr[i].split('/');
		}
		// game 1 sort
		document.write("Game 1 Rank" + "<BR>");
		userArr.sort(comp1);
		print(userLen);
		document.write("<BR>");
		// game 2 sort
		document.write("Game 2 Rank" + "<BR>");
		userArr.sort(comp2);
		print(userLen);
	};
	function comp1(a, b) {
		a[2] = parseInt(a[2]);
		b[2] = parseInt(b[2]);
		if (a[2] < b[2])
			return 1;
		else
			return -1;
	};
	function comp2(a, b) {
		a[3] = parseInt(a[3]);
		b[3] = parseInt(b[3]);
		if (a[3] < b[3])
			return 1;
		else
			return -1;
	};
	function print(l) {

		document
				.write("<table width='100%' height='100%' border='0' cellspacing='0' cellpadding='0'>")
		document.write("<tr>")

		document
				.write("<table border='0' cellspacing='1' cellpadding='0' bgcolor='#FFFFFF'>");
		document
				.write("<td width='50' height='20' bgcolor='#cc0000'>Name </td>");
		document.write("<td width='50' height='20' bgcolor='#cc0000'>Id </td>");
		document
				.write("<td width='50' height='20' bgcolor='#cc0000'>Game1 </td>");
		document
				.write("<td width='50' height='20' bgcolor='#cc0000'>Game2 </td>");
		document.write("</tr>");
		for (i = 0; i < l; i++) {
			document.write("<tr>");

			for (kan = 0; kan < 4; kan++) {
				document.write("<td width='50' height='20' bgcolor='#000066'>")
				document.write(userArr[i][kan]);
				document.write("</td>");
			}

			document.write("</tr>");
		}

		document.write("</table>");
		document.write("</td>");
		document.write("</tr>");
		document.write("</table>");

	};

	function menu() {
		location.href = "menu.html";
	};
</script>
</head>
<body>
	<br>
	<header>
		<hgroup>
			<h1>
				<img src="images/tizen_32.png" width="32" />MINI GAME
			</h1>
		</hgroup>
	</header>
	<script type="text/javascript">
		getInform()
	</script>
	<script type="text/javascript">
		getRank()
	</script>
	<br>
	<br>
	<input type="button" onclick="menu()" value="Menu">
	</input>
</body>
</html>