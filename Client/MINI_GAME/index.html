<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport"
	content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<meta name="description"
	content="Tizen basic template generated by Tizen Web IDE" />

<title>MINI GAME</title>

<link rel="stylesheet" type="text/css" href="css/style.css" />
<script src="js/main.js"></script>
<script type="text/javascript" src="./js/lib/external/jquery-1.8.0.js"></script>
<script type="text/javascript"
	src="./js/lib/external/jquery.mobile-1.2.0.js"></script>

</head>

<body>
	<br>
	<br>
	<br>
	<header>
		<hgroup>
			<h1>
				<img src="images/tizen_32.png" width="32" />MINI GAME
			</h1>
		</hgroup>
	</header>

	<article>
		<form id="formToLogin">
			ID <br> <input type="text" name="id" placeholder="ID"> <br>
			Password <br> <input type="text" name="password"
				placeholder="PASSWORD"> <br> <br> <input
				type="button" value="로그인 " onclick="login()"> <input
				type="button" value="회원가입 " onclick="register()">
		</form>

	</article>
	<footer>
		<p>20101694Jeong Bodon</p>
	</footer>
</body>


<script type="text/javascript">
	function register() {
		location.href = "register.html";
	};
	function login() {
		var url = "http://cspro.sogang.ac.kr/~cse20101694/cgi-bin/bd_login.php";
		var parameter = $('#formToLogin').serialize();
		$.ajax({
			type : "POST",
			url : url,
			data : parameter,
			success : function(msg) {
				var string = msg;
				var strArr = string.split('/');
				if (strArr[0] == 1) {
					alert('login success');
					setCookie('ID', strArr[1], 1);
					location.href = "menu.html";
				} else
					alert('login fail');
			},
			error : function(XMLHttpRequest, textStatus, errorThrown) {
				alert('some error ');
			}
		});
	};

	function setCookie(cName, cValue, cDay) {
		var expire = new Date();
		expire.setDate(expire.getDate() + cDay);
		cookies = cName + '=' + escape(cValue) + '; path=/ '; // 한글 깨짐을 막기위해 escape(cValue)를 합니다.
		if (typeof cDay != 'undefined')
			cookies += ';expires=' + expire.toGMTString() + ';';
		document.cookie = cookies;
	}

	function getCookie(cName) {
		cName = cName + '=';
		var cookieData = document.cookie;
		var start = cookieData.indexOf(cName);
		var cValue = '';
		if (start != -1) {
			start += cName.length;
			var end = cookieData.indexOf(';', start);
			if (end == -1)
				end = cookieData.length;
			cValue = cookieData.substring(start, end);
		}
		return unescape(cValue);
	}
</script>
</html>
